-- Script para criar as tabelas do banco:

USE SUCOS_FRUTAS;

-- Reiniciando as tabelas:
--DROP TABLE TABELA_DE_CLIENTES;
--DROP TABLE TABELA_DE_PRODUTOS;
--DROP TABLE TABELA_DE_VENDEDORES;

-- Criando as tabelas (já com as chaves primárias):
CREATE TABLE TABELA_DE_CLIENTES(
	CPF CHAR(11) NOT NULL,
	NOME VARCHAR(100) NULL,
	ENDERECO1 VARCHAR(150) NULL,
	ENDERECO2 VARCHAR(150) NULL,
	BAIRRO VARCHAR(50) NULL,
	CIDADE VARCHAR(50) NULL,
	ESTADO VARCHAR(2) NULL,
	CEP CHAR(8) NULL,
	DATA_DE_NASCIMENTO DATE NULL,
	IDADE SMALLINT NULL,
	GENERO CHAR(1) NULL,
	LIMITE_DE_CREDITO MONEY NULL,
	VOLUME_DE_COMPRA FLOAT NULL,
	PRIMEIRA_COMPRA BIT NULL,
CONSTRAINT PK_CLIENTES PRIMARY KEY CLUSTERED(CPF));

CREATE TABLE TABELA_DE_PRODUTOS(
	CODIGO_DO_PRODUTO VARCHAR(10) NOT NULL,
	NOME_DO_PRODUTO VARCHAR(50) NULL,
	EMBALAGEM VARCHAR(20) NULL,
	TAMANHO VARCHAR(10) NULL,
	SABOR VARCHAR(20) NULL,
	PRECO_DE_LISTA SMALLMONEY NULL,
CONSTRAINT PK_PRODUTOS PRIMARY KEY CLUSTERED(CODIGO_DO_PRODUTO));

CREATE TABLE TABELA_DE_VENDEDORES(
    MATRICULA CHAR(9) PRIMARY KEY,
	NOME VARCHAR(100) NOT NULL,
    DATA_ADIMISSAO DATE NOT NULL,
	DE_FERIAS BIT NOT NULL,
	BAIRRO VARCHAR(100) NOT NULL);

CREATE TABLE NOTAS_FISCAIS(
	NUMERO INT IDENTITY(1,1) PRIMARY KEY,
	CPF_CLIENTE CHAR(11) NOT NULL, -- FK
	MATRICULA_VENDEDOR CHAR(9) NOT NULL, -- FK
	DATA_VENDA DATE NOT NULL,
	IMPOSTO FLOAT NOT NULL,
CONSTRAINT FK_NOTAS_FISCAIS_CPF_CLIENTE FOREIGN KEY (CPF_CLIENTE) REFERENCES TABELA_DE_CLIENTES(CPF),
CONSTRAINT FK_NOTAS_FISCAIS_MATRICULA_VENDEDOR FOREIGN KEY (MATRICULA_VENDEDOR) REFERENCES TABELA_DE_VENDEDORES(MATRICULA));

CREATE TABLE ITENS_NOTAS_FISCAIS(
	NUMERO_NOTA INT NOT NULL,
	CODIGO_PRODUTO VARCHAR(10) NOT NULL,
	QUANTIDADE INT NOT NULL,
	PRECO INT NOT NULL,
CONSTRAINT FK_ITENS_NOTAS_NUMERO FOREIGN KEY (NUMERO_NOTA) REFERENCES NOTAS_FISCAIS(NUMERO),
CONSTRAINT FK_ITENS_NOTAS_CODIGO_PRODUTO FOREIGN KEY (CODIGO_PRODUTO) REFERENCES TABELA_DE_PRODUTOS(CODIGO_DO_PRODUTO));

-- Inserção de dados para teste:

INSERT INTO TABELA_DE_CLIENTES VALUES
('11111111111', 'Amanda Silva', 'Rua A, 100', NULL, 'Centro', 'São Paulo', 'SP', '01001000', '1990-01-01', 35, 'F', 5000.00, 12000.0, 1),
('22222222222', 'Bruno Souza', 'Av Brasil, 200', 'Apt 12', 'Copacabana', 'Rio de Janeiro', 'RJ', '22041001', '1985-05-10', 40, 'M', 4000.00, 10000.0, 0),
('33333333333', 'Carla Torres', 'Rua das Acácias, 300', NULL, 'Centro', 'Belo Horizonte', 'MG', '30140001', '1992-07-15', 33, 'F', 6000.00, 8500.0, 1),
('44444444444', 'Daniel Lima', 'Rua C, 400', NULL, 'Boa Viagem', 'Recife', 'PE', '51020010', '1980-03-22', 45, 'M', 5500.00, 9200.0, 1),
('55555555555', 'Eduarda Costa', 'Av Paulista, 500', NULL, 'Bela Vista', 'São Paulo', 'SP', '01310000', '1994-09-30', 31, 'F', 3000.00, 7800.0, 0),
('66666666666', 'Felipe Rocha', 'Rua F, 600', 'Casa 1', 'Ipanema', 'Rio de Janeiro', 'RJ', '22410000', '1987-12-05', 37, 'M', 4700.00, 9000.0, 1),
('77777777777', 'Gabriela Freitas', 'Rua G, 700', NULL, 'Centro', 'Curitiba', 'PR', '80010000', '1991-06-17', 34, 'F', 5100.00, 9700.0, 1),
('88888888888', 'Henrique Moraes', 'Rua H, 800', NULL, 'Centro', 'Fortaleza', 'CE', '60060000', '1983-04-04', 42, 'M', 6200.00, 8600.0, 0),
('99999999999', 'Isabela Duarte', 'Rua I, 900', NULL, 'Setor Bueno', 'Goiânia', 'GO', '74210020', '1989-10-20', 36, 'F', 5300.00, 8900.0, 1),
('12312312312', 'João Pedro', 'Rua J, 101', NULL, 'Jardins', 'São Paulo', 'SP', '01415001', '1990-11-11', 34, 'M', 4900.00, 9100.0, 0),
('23423423423', 'Kátia Ramos', 'Rua K, 202', 'Casa 3', 'Pinheiros', 'São Paulo', 'SP', '05422001', '1995-08-25', 30, 'F', 4400.00, 7600.0, 1),
('34534534534', 'Lucas Martins', 'Rua L, 303', NULL, 'Savassi', 'Belo Horizonte', 'MG', '30110000', '1982-02-14', 43, 'M', 5700.00, 9900.0, 1),
('45645645645', 'Mariana Teixeira', 'Rua M, 404', NULL, 'Itaim Bibi', 'São Paulo', 'SP', '04538000', '1993-03-03', 32, 'F', 6100.00, 8700.0, 1),
('56756756756', 'Nelson Vieira', 'Rua N, 505', NULL, 'Centro', 'Porto Alegre', 'RS', '90010000', '1984-06-06', 41, 'M', 4600.00, 7300.0, 0),
('67867867867', 'Olívia Nunes', 'Rua O, 606', 'Casa', 'Jardim América', 'São Paulo', 'SP', '01432000', '1996-12-12', 28, 'F', 5200.00, 8200.0, 1);

INSERT INTO TABELA_DE_PRODUTOS VALUES
('PRD001', 'Suco de Laranja', 'Garrafa', '1L', 'Laranja', 5.50),
('PRD002', 'Suco de Uva', 'Caixa', '1L', 'Uva', 6.00),
('PRD003', 'Suco de Maçã', 'Garrafa', '500ml', 'Maçã', 4.50),
('PRD004', 'Suco de Abacaxi', 'Caixa', '1L', 'Abacaxi', 5.80),
('PRD005', 'Suco de Pêssego', 'Lata', '350ml', 'Pêssego', 3.20),
('PRD006', 'Suco de Manga', 'Garrafa', '1,5L', 'Manga', 6.50),
('PRD007', 'Suco de Limão', 'Caixa', '1L', 'Limão', 4.90),
('PRD008', 'Suco Verde', 'Garrafa', '1L', 'Clorofila', 7.20),
('PRD009', 'Suco Detox', 'Garrafa', '500ml', 'Detox', 6.90),
('PRD010', 'Suco de Caju', 'Lata', '350ml', 'Caju', 3.80);

INSERT INTO TABELA_DE_VENDEDORES VALUES
('V00000001', 'Rafael Albuquerque', '2020-01-15', 0, 'Centro'),
('V00000002', 'Larissa Melo', '2021-06-01', 1, 'Copacabana'),
('V00000003', 'Tiago Ribeiro', '2019-03-10', 0, 'Pinheiros'),
('V00000004', 'Sabrina Lopes', '2022-07-20', 0, 'Itaim'),
('V00000005', 'Eduardo Cunha', '2023-11-05', 1, 'Barra da Tijuca');

INSERT INTO NOTAS_FISCAIS (CPF_CLIENTE, MATRICULA_VENDEDOR, DATA_VENDA, IMPOSTO) VALUES
('11111111111', 'V00000001', '2025-10-01', 0.12),
('22222222222', 'V00000002', '2025-10-02', 0.10),
('33333333333', 'V00000003', '2025-10-03', 0.15),
('44444444444', 'V00000004', '2025-10-04', 0.11),
('55555555555', 'V00000005', '2025-10-05', 0.13);

INSERT INTO ITENS_NOTAS_FISCAIS VALUES
(1, 'PRD001', 2, 11),
(1, 'PRD003', 1, 4),
(2, 'PRD002', 3, 18),
(2, 'PRD005', 2, 6),
(3, 'PRD004', 1, 6),
(3, 'PRD008', 2, 14),
(3, 'PRD010', 1, 3),
(4, 'PRD001', 3, 16),
(4, 'PRD006', 2, 13);